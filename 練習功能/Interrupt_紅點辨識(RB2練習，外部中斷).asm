list p=18f4520
#include <p18f4520.inc>
CONFIG OSC=HS, PWRT=ON, WDT=OFF, LVP=OFF, PBADEN=OFF

org  0x00
GOTO  INITIAL

org  0x08
BCF INTCON3,INT2IF
GOTO  JUDGE_1

org  0x40
INITIAL:
  CALL INITIAL_2
  CLRF TRISD
  BCF TRISB,2
  BSF TRISB,0
  BCF LATB,2
  GOTO MAIN

MAIN:
  CLRF PORTD
  BTFSS PORTB,0
  BSF LATB,2
  GOTO MAIN

INITIAL_2:  
  BSF RCON,IPEN
  BSF INTCON,GIEH
  BSF INTCON,GIEL
  BCF INTCON3,INT2IF

  BSF INTCON2,INTEDG2
  BSF INTCON3,INT2IP
  BSF INTCON3,INT2IE
  RETURN
JUDGE_1:
  MOVLW B'01010101'
  MOVWF PORTD
  BTFSS PORTB,0
  GOTO JUDGE_1
  BCF LATB,2
  RETFIE
END  





